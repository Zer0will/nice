<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Order</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/OnlineOrder.css" />
    <link rel="stylesheet" href="css/global-nav.css">
    <!-- Removed improved-nav.css to prevent conflicts with the main navigation system -->
    <style>
        body {
            margin-top: 100px;
            background: #0f0f0f;
            color: white;
        }

        .home-hero-text {
            max-width: 625px;
            font-family: "Poppins";
            font-size: 18px;
            margin: 40px 0px;
        }

        .home-hero-heading {
            font-size: 80px;
            font-family: "Poppins";
            line-height: 90px;
        }

        .home-hero-heading span {
            font-weight: bold;
        }

        .reser-button {
            border-radius: 24px;
            background: linear-gradient(90deg, #f7efc1 0%, #e0bc6b 100%);
            display: inline-flex;
            height: 44px;
            padding: 6px 32px;
            justify-content: center;
            align-items: center;
            gap: 10px;
            color: #232323;
            font-family: "Poppins";
            font-size: 18px;
            width: fit-content;
        }

        .ab-small {
            width: 320px;
            height: 280px;
        }

        .ab-l {
            width: 320px;
        }

        input[type="checkbox"] {
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            width: 20px;
            height: 20px;
            background-color: transparent;
            /* Transparent background initially */
            border: 2px solid white;
            /* White border */
            cursor: pointer;
            position: relative;
            border-radius: 4px;
            /* Optional: Rounded corners */
        }

        /* Style for the checked state */
        input[type="checkbox"]:checked {
            background-color: yellow;
            /* Yellow background when checked */
            border-color: black;
            /* Black border when checked */
        }

        input[type="checkbox"]:checked::after {
            content: "âœ”";
            /* Unicode for checkmark */
            font-size: 14px;
            color: black;
            /* Black checkmark */
            position: absolute;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            /* Center the checkmark */
            font-weight: bold;
        }


        @media (max-width: 1200px) {
            .ab-small {
                width: 200px;
                height: 180px;
            }

            .ab-l {
                width: 200px;
            }
        }

        @media (max-width: 600px) {
            .ab-small {
                width: 260px;
                height: 240px;
            }

            .ab-l {
                width: 260px;
            }

            .home-hero-heading {
                font-size: 40px;
            }
        }
    </style>
</head>

<body>
    <div class="home-hero-bg">
        <!-- Header -->
        <div id="header"></div>


        <!-- Page Content -->
        <div class="heroContainer">
            <div class="welcome-heading">
                Welcome to Plate of Africa Online Ordering
            </div>
            <div class="enjoyText">
                Enjoy the convenience of ordering your favorite dishes online. Explore our menu and indulge in a
                culinary experience like no other.
            </div>
        </div>

        <div class="heroContainer">
            <div class="sumaryMainOuter">
                <div class="sumaryMain">
                    <div class="summaryText">Summary</div>
                    <div class="productMainOuter">
                        <img src="./assets/images/productListing.png" class="productListing-Image" alt="">
                        <div class="productMainSection">
                            <img src="./assets/images//product1.png" class="productImg" alt="">
                            <div class="productDetailSection">


                                <div class="productNameouter">
                                    <div class="productName">Liberian Fried Okra</div>
                                    <input type="checkbox" checked>
                                </div>
                                <div class="productDetailText">
                                    Lorem ipsum dolor sit amet consectetur. Dolor enim faucibus porttitor a fringilla.
                                    Placerat malesuada facilisis sed sed a
                                </div>
                                <div class="priceSection">
                                    <div class="priceText">100.84 US$</div>
                                    <div class="selectedNumber">
                                        <div class="minusDiv" onclick="decrementItem(0)">-</div>
                                        <div class="SelectedDiv" id="counter">2</div>
                                        <div class="plusDiv" onclick="incrementItem(0)">+</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="productMainOuter">
                        <img src="./assets/images/productListing.png" class="productListing-Image" alt="">
                        <div class="productMainSection">
                            <img src="./assets/images//product2.png" class="productImg" alt="">
                            <div class="productDetailSection">


                                <div class="productNameouter">
                                    <div class="productName">African Spice Grilled Vegetable Skewers</div>
                                    <input type="checkbox" checked>
                                </div>
                                <div class="productDetailText">
                                    Lorem ipsum dolor sit amet consectetur. Dolor enim faucibus porttitor a fringilla.
                                    Placerat malesuada facilisis sed sed a
                                </div>
                                <div class="priceSection">
                                    <div class="priceText">100.84 US$</div>
                                    <div class="selectedNumber">
                                        <div class="minusDiv" onclick="decrementItem(1)">-</div>
                                        <div class="SelectedDiv" id="counter">2</div>
                                        <div class="plusDiv" onclick="incrementItem(1)">+</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="productMainOuter">
                        <img src="./assets/images/productListing.png" class="productListing-Image" alt="">
                        <div class="productMainSection">
                            <img src="./assets/images//product3.png" class="productImg" alt="">
                            <div class="productDetailSection">


                                <div class="productNameouter">
                                    <div class="productName">unny Chow</div>
                                    <input type="checkbox">
                                </div>
                                <div class="productDetailText">
                                    Lorem ipsum dolor sit amet consectetur. Dolor enim faucibus porttitor a fringilla.
                                    Placerat malesuada facilisis sed sed a
                                </div>
                                <div class="priceSection">
                                    <div class="priceText">100.84 US$</div>
                                    <div class="selectedNumber">
                                        <div class="minusDiv" onclick="decrementItem(2)">-</div>
                                        <div class="SelectedDiv" id="counter">2</div>
                                        <div class="plusDiv" onclick="incrementItem(2)">+</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="productMainOuter">
                        <img src="./assets/images/productListing.png" class="productListing-Image" alt="">
                        <div class="productMainSection">
                            <img src="./assets/images//product4.png" class="productImg" alt="">
                            <div class="productDetailSection">


                                <div class="productNameouter">
                                    <div class="productName">Liberian Fried Okra</div>
                                    <input type="checkbox">
                                </div>
                                <div class="productDetailText">
                                    Lorem ipsum dolor sit amet consectetur. Dolor enim faucibus porttitor a fringilla.
                                    Placerat malesuada facilisis sed sed a
                                </div>
                                <div class="priceSection">
                                    <div class="priceText">100.84 US$</div>
                                    <div class="selectedNumber">
                                        <div class="minusDiv" onclick="decrementItem(3)">-</div>
                                        <div class="SelectedDiv" id="counter">2</div>
                                        <div class="plusDiv" onclick="incrementItem(3)">+</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="orderSectionOuter">
                    <div class="ordertEXT">Order Summary</div>
                    <div id="dynamicCartItems"></div>
                    <!-- <div class="productLisOuter">
                        <div class="liberianText">Liberian Fried Okra</div>
                        <div class="abountTxet">100.84 US$</div>
                    </div>
                    <div class="productLisOuter">
                        <div class="liberianText">African Spice Grilled Vege...</div>
                        <div class="abountTxet">100.84 US$</div>
                    </div>
                    <div class="productLisOuter">
                        <div class="liberianText">unny Chow</div>
                        <div class="abountTxet">100.84 US$</div>
                    </div> -->
                    <!-- <div class="productLisOuter">
                        <div class="liberianText">Liberian Fried Okra</div>
                    </div> -->
                    <div class="totalASection">
                        <div class="productLisOuter">
                            <div class="liberianText">Subtotal</div>
                            <div class="abountTxet" id="subtotalAmount">$0.00</div>
                        </div>

                        <div class="productLisOuter">
                            <div class="liberianText">Sales Tax (10.25%)</div>
                            <div class="abountTxet" id="salesTaxAmount">$0.00</div>
                        </div>

                        <div class="productLisOuter" style="border-top: 1px solid #333; padding-top: 10px;">
                            <div class="liberianText" style="font-weight: bold;">Total</div>
                            <div class="abountTxet" id="grandTotalAmount" style="font-weight: bold;">$0.00</div>
                        </div>

                    </div>
                    <div class="paytext">Payment</div>
                    <div class="payBtnsouter">
                        <div class="paypalBtnSelected" id="paypalBtn">
                            <img src="./assets/images/paypalLogo.png" alt="PayPal Logo">
                            <img src="./assets/images/paypalTextBlack.png" alt="PayPal Text Black"
                                class="paypalTextBlack">
                            <img src="./assets/images/paypalTextWhite.png" alt="PayPal Text White"
                                class="paypalTextWhite">
                        </div>
                        <div class="paypalBtnUnselected" alt="Visa" id="visaBtn">
                            <img src="./assets/images/visaTextBlue.png">
                            <img src="./assets/images/visaLogo.png">
                        </div>
                    </div>
                    <div class="visaSection" id="visaSection">
                        <div class="cardHolderText">Cardholder's Name</div>
                        <input type="text" class="cardHolderInput" placeholder="Cardholder's Name">
                        <div class="cardHolderText">Card Number</div>
                        <input type="text" class="cardHolderInput" placeholder="Card Number">
                        <div class="cardexpirySection">
                            <div class="cardexpirySectionOuter">
                                <div class="cardHolderText">Card Number</div>
                                <input type="date" class="cardHolderInput" placeholder="Expiration date (MM /YY)">
                            </div>
                            <div class="cardexpirySectionOuter">
                                <div class="cardHolderText">CVC</div>
                                <input type="text" class="cardHolderInput" placeholder="CVC">
                            </div>
                        </div>
                        <div class="cardHolderText">Discount Code</div>
                        <div class="dicountSection">
                            <input type="text" class="cardHolderInput" placeholder="CHIKAMSO-20-OFF">
                            <div class="applytext">Apply</div>
                        </div>
                    </div>
                    <div class="payPalSection" id="paypalSection">
                        <div class="cardexpirySection">
                            <div class="cardexpirySectionOuter">
                                <div class="cardHolderText">First Name</div>
                                <input type="text" class="cardHolderInput" placeholder="First Name">
                            </div>
                            <div class="cardexpirySectionOuter">
                                <div class="cardHolderText">Last Name</div>
                                <input type="text" class="cardHolderInput" placeholder="Last Name">
                            </div>
                        </div>
                        <div class="cardHolderText">Card Number</div>
                        <input type="text" class="cardHolderInput" placeholder="Enter Card Number">
                        <div class="cardHolderText">Email</div>
                        <input type="text" class="cardHolderInput" placeholder="Email">
                    </div>
                    <button class="checkOutBtn" id="checkoutBtn" disabled>Checkout Unavailable</button>
                    <div class="BackMenuText" id="backToMenuBtn">Back to Menu</div>
                </div>
            </div>
        </div>

        <div class="orderbgLoweer">
            <img src="./assets//images/orderPageBg.png" class="orderPageBg" alt="">
            <img src="./assets/images/moveupArrow.png" class="moveupArrow" alt="Move Up Arrow">
        </div>

        <!-- Footer -->
        <div id="footer"></div>
    </div>

    <script src="script.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/Order.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet" />

    <!-- Add custom JavaScript for Order page functionality -->
    <script>

        document.addEventListener("DOMContentLoaded", function() {
            // Back to Menu functionality
            const backToMenuBtn = document.getElementById("backToMenuBtn");
            if (backToMenuBtn) {
                backToMenuBtn.addEventListener("click", function() {
                    // Navigate back to menu page
                    window.location.href = "menu.html";
                });
                
                // Add styling to make it look clickable
                backToMenuBtn.style.cursor = "pointer";
                backToMenuBtn.style.textDecoration = "underline";
                backToMenuBtn.style.color = "#E1C072";
                backToMenuBtn.style.fontWeight = "bold";
                backToMenuBtn.style.transition = "all 0.3s ease";
                
                // Add hover effect
                backToMenuBtn.addEventListener("mouseover", function() {
                    this.style.transform = "translateY(-2px)";
                    this.style.textShadow = "0 2px 4px rgba(0,0,0,0.3)";
                });
                
                backToMenuBtn.addEventListener("mouseout", function() {
                    this.style.transform = "translateY(0)";
                    this.style.textShadow = "none";
                });
            }
            
            // Disable checkout button with message
            const checkoutBtn = document.getElementById("checkoutBtn");
            if (checkoutBtn) {
                // Style the disabled button
                checkoutBtn.style.backgroundColor = "#555";
                checkoutBtn.style.cursor = "not-allowed";
                checkoutBtn.style.opacity = "0.7";
                
                // Add tooltip/message when hovering over the button
                checkoutBtn.setAttribute("title", "Checkout functionality is not available at this time");
                
                // Prevent any click events
                checkoutBtn.addEventListener("click", function(e) {
                    e.preventDefault();
                    // Show a message to the user
                    alert("Checkout is currently unavailable. Please check back later!");
                });
            }
            
            // Store references to cart items and their checkboxes
            let cartItemsData = [];
            
            // Load cart items from localStorage
            function loadCartItems() {
                const cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
                const dynamicCartItems = document.getElementById("dynamicCartItems");
                const totalAmountElement = document.getElementById("totalAmount");
                
                if (!dynamicCartItems) return;
                
                // Clear existing items
                dynamicCartItems.innerHTML = "";
                
                let totalAmount = 0;
                cartItemsData = []; // Reset the cart items data
                
                // Add each cart item to the summary
                cartItems.forEach((item, index) => {
                    // Extract price as a number
                    const price = parseFloat(item.price.replace("$", "")) || 0;
                    const itemTotal = price * item.productQuantity;
                    
                    // Create unique IDs for checkboxes
                    const cartCheckboxId = `cart-item-${index}`;
                    
                    // Store item data for reference
                    cartItemsData.push({
                        index,
                        name: item.name,
                        price: price,
                        quantity: item.productQuantity,
                        total: itemTotal,
                        cartCheckboxId,
                        checked: true // Default to checked
                    });
                    
                    // Create item element for cart summary
                    const itemElement = document.createElement("div");
                    itemElement.className = "productLisOuter";
                    itemElement.innerHTML = `
                        <div class="productNameouter" style="display: flex; align-items: center; gap: 10px;">
                            <input type="checkbox" id="${cartCheckboxId}" checked>
                            <div class="liberianText">${item.name}</div>
                        </div>
                        <div class="abountTxet item-price" data-price="${itemTotal.toFixed(2)}">$${itemTotal.toFixed(2)}</div>
                    `;
                    
                    dynamicCartItems.appendChild(itemElement);
                    
                    // Initially add to total since checkboxes are checked by default
                    totalAmount += itemTotal;

                    // Update the quantity display in the main product section
                    const quantityElements = document.querySelectorAll('.SelectedDiv');
                    if (quantityElements[index]) {
                        quantityElements[index].textContent = item.productQuantity;
                    }


                });
                
                // Update total amount
                if (totalAmountElement) {
                    totalAmountElement.textContent = `$${totalAmount.toFixed(2)}`;
                }
                
                // If cart is empty, show a message
                if (cartItems.length === 0) {
                    const emptyCartMessage = document.createElement("div");
                    emptyCartMessage.className = "productLisOuter";
                    emptyCartMessage.innerHTML = `
                        <div class="liberianText" style="color: #999; text-align: center; width: 100%;">Your cart is empty</div>
                    `;
                    dynamicCartItems.appendChild(emptyCartMessage);
                    
                    // Update total to zero
                    if (totalAmountElement) {
                        totalAmountElement.textContent = "$0.00";
                    }
                }


                
                
                // Remove checkboxes from the main summary section
                removeCheckboxesFromSummary();
                
                // Add event listeners to checkboxes
                setupCheckboxListeners();


                //Update total immediately after loading into order.html
                updateTotal();
            }
            
            // Function to remove checkboxes from the main summary section
            function removeCheckboxesFromSummary() {
                // Find all checkboxes in the main summary section
                const summaryCheckboxes = document.querySelectorAll('.sumaryMain .productNameouter input[type="checkbox"]');
                
                // Remove each checkbox
                summaryCheckboxes.forEach(checkbox => {
                    // Get the parent element (productNameouter)
                    const parent = checkbox.parentElement;
                    if (parent) {
                        // Remove the checkbox
                        checkbox.remove();
                        
                        // Adjust styling if needed
                        parent.style.display = 'flex';
                        parent.style.justifyContent = 'space-between';
                    }
                });
            }
            
            // Function to set up checkbox event listeners
            function setupCheckboxListeners() {
                // For each item in our cart data
                cartItemsData.forEach(item => {
                    const cartCheckbox = document.getElementById(item.cartCheckboxId);
                    
                    if (cartCheckbox) {
                        cartCheckbox.addEventListener('change', function() {
                            // Update the item's checked status
                            item.checked = this.checked;
                            
                            // Update the total
                            updateTotal();
                        });
                    }
                });
            }

            // Sales Tax Calculation
            function calculateSalesTax(subtotal) {
                const salesTaxRate = 0.1025; // 10.25% sales tax
                return subtotal * salesTaxRate;
            }

            // Function to update all amounts
            function updateTotal() {
                const subtotalElement = document.getElementById("subtotalAmount");
                const salesTaxElement = document.getElementById("salesTaxAmount");
                const grandTotalElement = document.getElementById("grandTotalAmount");
    
                let subtotal = 0; 
    
                // Calculate subtotal based on checked items only
                cartItemsData.forEach(item => {
                    item.total = item.price * item.quantity;
                    if (item.checked) {
                        subtotal += item.total;
                    }
                });
    
            // Calculate Sales Tax
            const salesTax = calculateSalesTax(subtotal);

            // Update all display elements
            if (subtotalElement) {
                subtotalElement.textContent = `$${subtotal.toFixed(2)}`;
            }
    
            if (salesTaxElement) {
                salesTaxElement.textContent = `$${salesTax.toFixed(2)}`;
            }

            const grandTotal = subtotal + salesTax;

    
            if (grandTotalElement) {
                grandTotalElement.textContent = `$${grandTotal.toFixed(2)}`;
            }
        }

            
            
            // Define increment/decrement functions for the quantity controls
            window.incrementItem = function(index) {
                if (index >= 0 && index < cartItemsData.length) {
                    const item = cartItemsData[index];
                    
                    // Increment quantity
                    item.quantity++;
                    
                    // Update the quantity display 
                    const quantityElements = document.querySelectorAll('.SelectedDiv');
                    if (quantityElements[index]) {
                        quantityElements[index].textContent = item.quantity;
                    }

                    // Update total
                    item.total = item.price * item.quantity;
                    
                    // Update price display in cart summary
                    const priceElement = document.querySelector(`#${item.cartCheckboxId}`).closest('.productLisOuter').querySelector('.item-price');
                    if (priceElement) {
                        priceElement.textContent = `$${item.total.toFixed(2)}`;
                        priceElement.setAttribute('data-price', item.total.toFixed(2));
                        //priceElement.innerText = `$${item.total.toFixed(2)}`;
                    }
                    
                    // Update total
                    updateTotal();
                    
                    // Update localStorage
                    updateCartInLocalStorage();
                }
            };
            
            window.decrementItem = function(index) {
                if (index >= 0 && index < cartItemsData.length) {
                    const item = cartItemsData[index];
                    
                    // Don't allow quantity below 1
                    if (item.quantity > 1) {
                        // Decrement quantity
                        item.quantity--;

                        // Update the quantity display in the main product section
                        const quantityElements = document.querySelectorAll('.SelectedDiv');
                        if (quantityElements[index]) {
                            quantityElements[index].textContent = item.quantity;
                        }
                        
                        // Update total
                        item.total = item.price * item.quantity;
                        
                        // Update price display in cart summary
                        const priceElement = document.querySelector(`#${item.cartCheckboxId}`).closest('.productLisOuter').querySelector('.item-price');
                        if (priceElement) {
                            priceElement.textContent = `$${item.total.toFixed(2)}`
                            priceElement.setAttribute('data-price', item.total.toFixed(2));
                            //priceElement.innerText = `$${item.total.toFixed(2)}`;
                        }
                        
                        // Update total
                        updateTotal();
                        
                        // Update localStorage
                        updateCartInLocalStorage();
                    }
                }
            };
            
            // Function to update cart in localStorage
            function updateCartInLocalStorage() {
                const cartItems = JSON.parse(localStorage.getItem("cartItems")) || [];
                
                // Update quantities in localStorage
                cartItemsData.forEach((item, index) => {
                    if (index < cartItems.length) {
                        cartItems[index].productQuantity = item.quantity;
                    }
                });
                
                // Save back to localStorage
                localStorage.setItem("cartItems", JSON.stringify(cartItems));
                localStorage.setItem("cart", JSON.stringify(cartItems)); // For backward compatibility
            }
            
            // Call the function to load cart items
            loadCartItems();
        });
    </script>
</body>

</html>
